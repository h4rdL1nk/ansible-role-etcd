---
dependency:
  name: galaxy
driver:
  name: openstack
lint:
  name: yamllint
platforms:
  - name: ${JOB_NAME:-molecule_instance_manual}
    image: TID-RH75.20180601
    flavor: TID-01CPU-01GB-20GB 
    sshuser: cloud-user
    ip_pool: ext_mgmt
    network: DOCKER_MGMT
    networks:
      - net-name: DOCKER_MGMT
      - net-name: DOCKER_BACK
    volumes:
      - name: ${JOB_NAME:-molecule_instance_manual}_volume_1
        size: 5
        device: /dev/vdb
      - name: ${JOB_NAME:-molecule_instance_manual}_volume_1
        size: 10
        device: /dev/vdb
provisioner:
  name: ansible
  lint:
    name: ansible-lint
  playbooks:
    prepare: ../../molecule_common/scenarios/openstack/prepare.yml 
    create: ../../molecule_common/scenarios/openstack/create.yml
    converge: playbook.yml
    destroy: ../../molecule_common/scenarios/openstack/destroy.yml

scenario:
  name: openstack
verifier:
  name: testinfra
  lint:
    name: flake8
